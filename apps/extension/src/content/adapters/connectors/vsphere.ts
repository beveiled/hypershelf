import type { ConnectorAdapter } from "../types";
import { textFromSelector } from "../utils";
import { BlockWidget } from "../widgets";

export const vsphereConnector = {
  id: "vsphere",
  widget: BlockWidget,
  banner:
    "data:image/svg+xml;base64,PHN2ZyBpZD0iYSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMzE2IDcxIj4KICA8cmVjdCB3aWR0aD0iMzE2IiBoZWlnaHQ9IjcxIiByeD0iOCIgcnk9IjgiIGZpbGw9IiMwOTA5MGEiLz4KICA8bGluZSB4MT0iMTYuNTkiIHkxPSIyNC4yNSIgeDI9IjMxLjA3IiB5Mj0iMjQuMjUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzljZTgyNCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8ZyBpc29sYXRpb249Imlzb2xhdGUiPgogICAgPHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTkgNTMpIiBmaWxsPSIjZmZmIiBmb250LWZhbWlseT0iQ2hpY2twZWFzLCBDaGlja3BlYXMiIGZvbnQtc2l6ZT0iMjIiIGlzb2xhdGlvbj0iaXNvbGF0ZSI+PHRzcGFuIHg9IjAiIHk9IjAiPkJvbzwvdHNwYW4+PHRzcGFuIHg9IjMyLjE2IiB5PSIwIiBsZXR0ZXItc3BhY2luZz0iLS4wMmVtIj50PC90c3Bhbj48dHNwYW4geD0iNDAuOTYiIHk9IjAiPmluZyB1cCB0aGUgaW50ZWdyPC90c3Bhbj48dHNwYW4geD0iMjA4LjUzIiB5PSIwIiBsZXR0ZXItc3BhY2luZz0iLS4xZW0iPmE8L3RzcGFuPjx0c3BhbiB4PSIyMTYuODMiIHk9IjAiIGxldHRlci1zcGFjaW5nPSItLjAyZW0iPnQ8L3RzcGFuPjx0c3BhbiB4PSIyMjUuNjMiIHk9IjAiPmlvbi4uLjwvdHNwYW4+PC90ZXh0PgogIDwvZz4KICA8dGV4dCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNiAyMS45KSIgZmlsbD0iI2ZmZiIgZm9udC1mYW1pbHk9IlN5bmUtRXh0cmFCb2xkLCBTeW5lIiBmb250LXNpemU9IjEyIiBmb250LXZhcmlhdGlvbi1zZXR0aW5ncz0iJmFwb3M7d2dodCZhcG9zOyA4MDAiIGZvbnQtd2VpZ2h0PSI3MDAiPjx0c3BhbiB4PSIwIiB5PSIwIj5IeXBlcnNoZTwvdHNwYW4+PHRzcGFuIHg9IjkyLjA5IiB5PSIwIiBsZXR0ZXItc3BhY2luZz0iLS4wMmVtIj5sPC90c3Bhbj48dHNwYW4geD0iOTYuMTciIHk9IjAiIGxldHRlci1zcGFjaW5nPSIwZW0iPmY8L3RzcGFuPjwvdGV4dD4KICA8dGV4dCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNDAgMjIuODgpIiBmaWxsPSIjZmZmIiBmb250LWZhbWlseT0iQ2hpY2twZWFzLCBDaGlja3BlYXMiIGZvbnQtc2l6ZT0iMjIiPjx0c3BhbiB4PSIwIiB5PSIwIj54PC90c3Bhbj48L3RleHQ+CiAgPGc+CiAgICA8cGF0aCBkPSJNMTc0LjMzLDEyLjMzYzAtLjc0LjYtMS4zMywxLjMzLTEuMzNoNS45OWMuNzQsMCwxLjMzLjYsMS4zMywxLjMzdjUuOTljMCwuNzQtLjYsMS4zMy0xLjMzLDEuMzNoLTUuOTljLS43NCwwLTEuMzMtLjYtMS4zMy0xLjMzdi0yIiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDk4ZDQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgogICAgPHBhdGggZD0iTTE3OS42NywyMS42N2MwLC43NC0uNiwxLjMzLTEuMzMsMS4zM2gtNmMtLjc0LDAtMS4zMy0uNi0xLjMzLTEuMzN2LTUuOTljMC0uNzQuNi0xLjMzLDEuMzMtMS4zM2g1Ljk5Yy43NCwwLDEuMzMuNiwxLjMzLDEuMzN2MiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZjM4YzAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KICA8L2c+CiAgPGc+CiAgICA8cGF0aCBkPSJNMTk0LjEyLDIwLjQ3bC0zLjUzLTguMTZoLTEuMTVsNC4xMSw5LjQ5aDEuMTVsNC4xMS05LjQ5aC0xLjE1bC0zLjU1LDguMTZaTTIwNC43NSwxOC45M2wtMy40NS02LjYyaC0xLjA1djkuNDloMS4wNXYtNy4xN2wzLjQ1LDYuNjIsMy40NS02LjYydjcuMTdoMS4wNXYtOS40OWgtMS4wNWwtMy40NSw2LjYyWk0yMTguMTgsMjAuNDJsLTEuOTItNS43NmgtLjg3bC0xLjkxLDUuNzYtMS43NC01Ljc2aC0xLjA3bDIuMzUsNy4xNGguOThsMS44OS01LjcxLDEuODcsNS43MWguOTdsMi4zNS03LjE0aC0xLjA3bC0xLjgxLDUuNzZaTTIyNi42NCwxNS4zMWMtLjQ2LS41NS0xLjE3LS44MS0yLjA5LS44MS0uNzcsMC0xLjYxLjI0LTIuNTMuN2wuNDEuODRjLjM4LS4yMS43NC0uMzYsMS4wNy0uNDcuMzQtLjExLjY3LS4xOS45Ny0uMTkuNjksMCwxLjE4LjIxLDEuNDUuNi4yOC4zOS40My44OS40MywxLjQ2di4yNmMtLjgyLS4yNi0xLjU2LS4zOS0yLjI4LS4zOS0uNDgsMC0uOTQuMS0xLjM4LjI5LS40MS4yMS0uNzcuNDctMSwuODQtLjI1LjM2LS4zOC43OC0uMzgsMS4yMiwwLC43LjIzLDEuMjUuNzIsMS42Ny40OS40MiwxLjEuNjMsMS44NC42My40OCwwLC45Ny0uMSwxLjQtLjM0LjQ2LS4yNC44Mi0uNTUsMS4wNS0uOTR2MS4xMmgxLjAydi00LjM1YzAtLjg5LS4yMy0xLjYyLS43Mi0yLjE0aDBaTTIyNi4zNiwxOS41NmMtLjEzLjQ3LS40MS44NC0uODcsMS4xLS40NC4yNi0uOTIuMzktMS40My4zOXMtLjkyLS4xMy0xLjI1LS4zOWMtLjMzLS4yNi0uNDktLjYtLjQ5LTEuMDJzLjE4LS43OC41Ni0xLjA0Yy4zOC0uMjkuODItLjQyLDEuMzUtLjQyLjcyLDAsMS40My4xLDIuMTIuMjl2MS4wOWgwWk0yMzAuMjksMTYuMDZ2LTEuNDFoLTEuMDJ2Ny4xNGgxLjAydi0zLjk5YzAtLjQ3LjEzLS44Ni4zNi0xLjIyLjIzLS4zNy41Ni0uNjUuOTctLjg2LjQxLS4yMS44Ny0uMzEsMS40MS0uMzF2LS45NGMtLjY0LDAtMS4yLjEzLTEuNjkuNDItLjUyLjMxLS44NS42OC0xLjA1LDEuMTdNMjM4LjE5LDIwLjgxYy0uNDEuMTYtLjg0LjI2LTEuMjUuMjYtLjY5LDAtMS4yNS0uMjQtMS43MS0uNjgtLjQ2LS40NC0uNzItMS4wNC0uNzktMS43NWg1LjczYy4wMi0xLjI4LS4yNi0yLjI5LS44NC0zLjAyLS41OS0uNzYtMS40MS0xLjEyLTIuNDYtMS4xMi0uNjEsMC0xLjIuMTYtMS43My41LS41NC4zMS0uOTUuNzgtMS4yNSwxLjMzLS4zMS41Ny0uNDYsMS4yLS40NiwxLjkxcy4xNSwxLjM1LjQ4LDEuOTNjLjM0LjU3Ljc3LDEuMDIsMS4zMSwxLjM1LjU0LjM0LDEuMTIuNSwxLjc0LjUuNTEsMCwxLjAyLS4xLDEuNTYtLjMxLjU0LS4yMS45NS0uNDcsMS4yNS0uODFsLS42Mi0uNjhjLS4yMS4yNC0uNTQuNDQtLjk1LjZaTTIzNS4yOCwxNi4wNmMuNDYtLjQyLDEtLjYzLDEuNjQtLjYzczEuMi4yMSwxLjU4LjYzYy4zOC40Mi42MS45Ny42OSwxLjY0aC00LjczYy4xLS42OC4zNi0xLjIyLjgyLTEuNjRoMFoiIGZpbGw9IiM3MjcxNzUiLz4KICAgIDxwYXRoIGQ9Ik0yNDUuODgsMTQuNTFoMS4xNmwyLjM4LDUuOTEsMi4zNC01LjkxaDEuMTZsLTMsNy4xMmgtMWwtMy4wNS03LjEyWk0yNTMuNjUsMjAuMjhsLjY4LS44NGMuNDEuNDEuODkuNzUsMS40MSwxLC41My4yNCwxLjEyLjM3LDEuNy4zNi40MSwwLC44My0uMDcsMS4yLS4yMy4zLS4xMy41Ny0uMzQuNzYtLjYxLjE3LS4yNC4yNi0uNTMuMjYtLjgyLjAxLS40NS0uMjItLjg3LS42LTEuMDktLjYxLS4zMy0xLjI4LS41Ny0xLjk2LS42OS0uNTgtLjEzLTEuMTYtLjMyLTEuNzEtLjU1LS40MS0uMTctLjc3LS40Ni0xLjA0LS44Mi0uMjYtLjM5LS4zOS0uODQtLjM3LTEuMywwLS40OC4xNC0uOTYuNDItMS4zNi4yOS0uNDIuNjgtLjc2LDEuMTQtLjk3LjUxLS4yNCwxLjA2LS4zNiwxLjYzLS4zNS42MiwwLDEuMjQuMTEsMS44Mi4zNS41Ni4yNCwxLjA3LjU4LDEuNTIsMWwtLjY3Ljg0Yy0uMzgtLjM3LS44Mi0uNjctMS4zLS45LS40NS0uMjEtLjkzLS4zMi0xLjQzLS4zMi0uMzYsMC0uNzEuMDctMS4wNC4yMi0uMy4xMy0uNTUuMzMtLjc0LjYtLjE3LjIzLS4yNi41Mi0uMjYuODEtLjAxLjQzLjIyLjgyLjYsMS4wMy42Mi4zMSwxLjI4LjU1LDEuOTcuNjguODMuMTYsMS42Mi40OSwyLjMyLjk3LjU0LjQzLjg0LDEuMDguOCwxLjc3LDAsLjQ5LS4xMi45OC0uMzgsMS4zOS0uMjguNDMtLjY3Ljc3LTEuMTQuOTgtLjU4LjI1LTEuMi4zNy0xLjgzLjM2LTEuNC4wMy0yLjc2LS41MS0zLjc1LTEuNU0yNjguOTcsMTYuMTRjLS4yNy0uNTQtLjY4LTEtMS4xOS0xLjMyLS41LS4zMi0xLjA4LS40OC0xLjY4LS40OC0uNTQsMC0xLjA2LjEzLTEuNTEuNC0uNDYuMjctLjgzLjY1LTEuMDksMS4xMXYtMS4zNGgtMS4wNHY5LjQ5aDEuMDR2LTMuNzFjLjI2LjQ2LjYzLjg0LDEuMDksMS4xMS40Ni4yNy45OC40LDEuNTEuMzkuNTksMCwxLjE4LS4xNiwxLjY4LS40OC41MS0uMzIuOTItLjc4LDEuMTktMS4zMy41Ny0xLjIyLjU3LTIuNjMsMC0zLjg1aDBaTTI2OCwxOS41MWMtLjE4LjQxLS40OC43Ni0uODUsMS0uMzcuMjQtLjguMzYtMS4yNC4zNi0uNDQsMC0uODctLjEyLTEuMjUtLjM2LS4zNy0uMjUtLjY3LS41OS0uODYtMS0uMjEtLjQ1LS4zMi0uOTUtLjMxLTEuNDUsMC0uNS4xLS45OS4zMS0xLjQ1LjE4LS40MS40OC0uNzUuODYtLjk5LjM3LS4yNC44MS0uMzYsMS4yNS0uMzYuNDQsMCwuODcuMTIsMS4yNC4zNi4zNy4yNC42Ny41OS44NS45OS4yMS40NS4zMS45NS4zLDEuNDUsMCwuNS0uMSwxLS4zLDEuNDVaTTI3NS43NywxNC42OWMuNC4yMy43My41Ni45NS45Ny4yMy40NC4zNS45NC4zNCwxLjQ0djQuNTNoLTEuMDR2LTQuMzljLjAzLS41Mi0uMTUtMS4wMy0uNS0xLjQzLS4zMy0uMzYtLjgtLjU2LTEuMjktLjU0LS4zOCwwLS43Ni4wOC0xLjExLjI1LS4zMi4xNS0uNi4zOC0uODEuNjctLjE5LjI3LS4zLjU5LS4zLjkydjQuNTNoLTEuMDR2LTkuNjNoMS4wNHYzLjY0Yy4yMi0uNC41NS0uNzIuOTUtLjk0Ljg3LS40NywxLjkyLS40OCwyLjgtLjAxWk0yODMuMzgsMjAuNjJjLS40MS4xNi0uODQuMjUtMS4yOC4yNS0uNjUuMDItMS4yNy0uMjMtMS43My0uNjgtLjQ3LS40Ni0uNzYtMS4wOC0uODEtMS43M2g1Ljg2YzAtMS4yNi0uMy0yLjI2LS45LTMtLjYxLS43NS0xLjUzLTEuMTYtMi41LTEuMTItLjYyLDAtMS4yMy4xNi0xLjc3LjQ4LS41NC4zMi0uOTkuNzgtMS4yOSwxLjMzLS4zMi41OC0uNDgsMS4yMy0uNDgsMS44OSwwLC42Ny4xNywxLjM0LjUxLDEuOTIuMzIuNTYuNzgsMS4wMiwxLjMzLDEuMzQuNTQuMzIsMS4xNi40OSwxLjc5LjQ4LjU1LDAsMS4wOS0uMTEsMS42LS4zLjQ4LS4xNi45Mi0uNDMsMS4yOC0uOGwtLjY0LS42OGMtLjI4LjI3LS42MS40OC0uOTguNjFoMFpNMjgwLjM5LDE1Ljg5Yy40NS0uNDEsMS4wNS0uNjQsMS42Ni0uNjMuNjEtLjAzLDEuMTkuMiwxLjYyLjYzLjQxLjQ2LjY2LDEuMDQuNywxLjY1aC00LjgyYy4wNy0uNjMuMzYtMS4yMi44My0xLjY1Wk0yODguOTcsMTQuNzZjLjUyLS4yOSwxLjEyLS40MywxLjcxLS40MnYuOTNjLS40OSwwLS45OC4wOS0xLjQzLjMtLjQuMTgtLjc0LjQ4LS45OC44NS0uMjQuMzctLjM2LjgtLjM2LDEuMjN2My45OGgtMS4wNHYtNy4xMmgxLjA0djEuMzljLjIyLS40OC41OS0uODgsMS4wNi0xLjE0TTI5NiwyMC42MmMtLjQxLjE2LS44NC4yNS0xLjI4LjI1LS42NS4wMi0xLjI3LS4yMy0xLjczLS42OC0uNDctLjQ2LS43Ni0xLjA4LS44MS0xLjczaDUuODZjMC0xLjI2LS4zLTIuMjYtLjg5LTMtLjYxLS43NS0xLjU0LTEuMTYtMi41LTEuMTItLjYyLDAtMS4yMy4xNi0xLjc2LjQ4LS41NC4zMi0uOTkuNzgtMS4yOSwxLjMzLS4zMi41OC0uNDgsMS4yMy0uNDgsMS44OS0uMDEuNjguMTYsMS4zMy41LDEuOTIuMzIuNTYuNzgsMS4wMiwxLjMzLDEuMzQuNTQuMzIsMS4xNi40OSwxLjc5LjQ4LjU1LDAsMS4wOS0uMTEsMS42LS4zLjQ5LS4xNi45My0uNDMsMS4yOC0uOGwtLjY0LS42OGMtLjI4LjI3LS42MS40OC0uOTcuNjFoMFpNMjkzLjAyLDE1Ljg5Yy40Ni0uNDEsMS4wNS0uNjQsMS42Ny0uNjMuNi0uMDMsMS4xOS4yLDEuNjIuNjMuNDEuNDYuNjYsMS4wNC43LDEuNjVoLTQuODJjLjA2LS42My4zNi0xLjIyLjgzLTEuNjVoMFoiIGZpbGw9IiM3MjcxNzUiLz4KICA8L2c+Cjwvc3ZnPg==",
  anchorSelectors: [
    'div[portlet-id="vsphere.core.vm.summary.annotationsNotesView"]',
  ],
  anchorPosition: "before",
  observableSelectors: ['span[data-test-id="DNS Name:"]'],
  extractHostname: (ctx) =>
    textFromSelector(ctx.doc, 'span[data-test-id="DNS Name:"]'),
} as const satisfies ConnectorAdapter;
